(function(){"use strict";var e={3205:function(e,n,t){var o=t(9242),r=t(3396);function a(e,n,t,o,a,l){const i=(0,r.up)("Navbar"),u=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i),(0,r.Wm)(u)],64)}const l={class:"navis"};function i(e,n){const t=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",l,[(0,r.Wm)(t,{class:"router-L",to:{name:"Chatroom"}},{default:(0,r.w5)((()=>[(0,r.Uk)("Chatroom")])),_:1}),(0,r.Wm)(t,{class:"router-L",to:{name:"geoLocation"}},{default:(0,r.w5)((()=>[(0,r.Uk)("geo-Location")])),_:1})])}var u=t(89);const s={},c=(0,u.Z)(s,[["render",i]]);var d=c,p={components:{Navbar:d}};const m=(0,u.Z)(p,[["render",a]]);var g=m,v=t(2483);const h={class:"welcome container"},f=(0,r._)("p",null,"Welcome to Chatroom",-1),w={key:0},y=(0,r._)("h2",null,"Login",-1),b={key:1},_=(0,r._)("h2",null,"Sign Up",-1);function H(e,n,t,o,a,l){const i=(0,r.up)("Loginform"),u=(0,r.up)("Signupform");return(0,r.wg)(),(0,r.iD)("div",h,[f,o.showLogin?((0,r.wg)(),(0,r.iD)("div",w,[y,(0,r.Wm)(i,{onLogin:o.enterChat},null,8,["onLogin"]),(0,r._)("p",null,[(0,r.Uk)("No account yet ? "),(0,r._)("span",{onClick:n[0]||(n[0]=e=>o.showLogin=!1)},"Signup"),(0,r.Uk)(" Instead")])])):((0,r.wg)(),(0,r.iD)("div",b,[_,(0,r.Wm)(u,{onSignup:o.enterChat},null,8,["onSignup"]),(0,r._)("p",null,[(0,r.Uk)("Already Registered "),(0,r._)("span",{onClick:n[1]||(n[1]=e=>o.showLogin=!0)},"Login"),(0,r.Uk)(" Instead")])]))])}t(560);var S=t(7139);const C={class:"error"},D=(0,r._)("button",null,"Sign up",-1);function k(e,n,t,a,l,i){return(0,r.wg)(),(0,r.iD)("form",{onSubmit:n[3]||(n[3]=(0,o.iM)(((...e)=>a.handleSubmit&&a.handleSubmit(...e)),["prevent"]))},[(0,r.wy)((0,r._)("input",{type:"text",required:"",placeholder:"display name","onUpdate:modelValue":n[0]||(n[0]=e=>a.displayName=e)},null,512),[[o.nr,a.displayName]]),(0,r.wy)((0,r._)("input",{type:"email",required:"",placeholder:"email","onUpdate:modelValue":n[1]||(n[1]=e=>a.email=e)},null,512),[[o.nr,a.email]]),(0,r.wy)((0,r._)("input",{type:"password",required:"",placeholder:"password","onUpdate:modelValue":n[2]||(n[2]=e=>a.password=e)},null,512),[[o.nr,a.password]]),(0,r._)("div",C,(0,S.zw)(a.error),1),D],32)}var L=t(4870),U=t(1509);t(476),t(5362);const Z={apiKey:"AIzaSyB_Z1E-j1LHyngRRBV4y3VmzRKzEDdcvg8",authDomain:"live-chat-e2b9d.firebaseapp.com",projectId:"live-chat-e2b9d",storageBucket:"live-chat-e2b9d.appspot.com",messagingSenderId:"786655517818",appId:"1:786655517818:web:8907615ca878c445456fc3",measurementId:"G-M6J96TW2RH"};U.Z.initializeApp(Z);const O=U.Z.firestore(),W=U.Z.firestore.FieldValue.serverTimestamp,A=U.Z.auth(),E=(0,L.iH)(null),z=async(e,n,t)=>{try{E.value=null;const o=await A.createUserWithEmailAndPassword(e,n);if(!o)throw new Error("Could not sign user up");return await o.user.updateProfile({displayName:t}),E.value=null,o}catch(o){console.log(o.message),E.value="Could not sign user up"}},I=()=>({error:E,signup:z});var M=I;const N=(0,L.iH)(A.currentUser);A.onAuthStateChanged((e=>{N.value=e}));const j=()=>({user:N});var x=j;const P=e=>{const n=(0,L.iH)(null),t=async t=>{try{await O.collection(e).add(t)}catch(o){console.log(o.message),n.value="no message"}};return{error:n,addDoc:t}};var T=P,V={setup(e,n){const{user:t}=x(),{er:o,addDoc:r}=T("users"),a=(0,L.iH)(null),l=(0,L.iH)(null),{error:i,signup:u}=M(),s=(0,L.iH)(""),c=(0,L.iH)(""),d=(0,L.iH)(""),p=async()=>{await u(c.value,d.value,s.value),i.value||n.emit("signup"),navigator.geolocation&&navigator.geolocation.getCurrentPosition((e=>{a.value=e.coords.latitude,l.value=e.coords.longitude;const n={userX:t.value.uid,geolocation:{lat:e.coords.latitude,lng:e.coords.longitude}};r(n)}),(e=>{console.log(e)}),{maximumAge:6e4,timeout:3e3})};return{displayName:s,email:c,password:d,handleSubmit:p,error:i}}};const q=(0,u.Z)(V,[["render",k]]);var B=q;const R=(0,r._)("button",null,"Log in",-1),K={class:"error"};function F(e,n,t,a,l,i){return(0,r.wg)(),(0,r.iD)("form",{onSubmit:n[2]||(n[2]=(0,o.iM)(((...e)=>a.handleSubmit&&a.handleSubmit(...e)),["prevent"]))},[(0,r.wy)((0,r._)("input",{type:"email",required:"",placeholder:"email","onUpdate:modelValue":n[0]||(n[0]=e=>a.email=e)},null,512),[[o.nr,a.email]]),(0,r.wy)((0,r._)("input",{type:"password",required:"",placeholder:"password","onUpdate:modelValue":n[1]||(n[1]=e=>a.password=e)},null,512),[[o.nr,a.password]]),R,(0,r._)("div",K,(0,S.zw)(a.error),1)],32)}const Y=(0,L.iH)(null),X=async(e,n)=>{try{Y.value=null;const t=await A.signInWithEmailAndPassword(e,n);if(!t)throw new Error("Incorrect login credentials");return Y.value=null,t}catch(t){console.log(t.message),Y.value="Incorrect login credentials"}},G=()=>({error:Y,login:X});var J=G,Q={setup(e,n){(0,L.iH)(null),(0,L.iH)(null);const{error:t,login:o}=J(),r=(0,L.iH)(""),a=(0,L.iH)(""),l=async()=>{await o(r.value,a.value),t.value||n.emit("login")};return{email:r,password:a,handleSubmit:l,error:t}}};const $=(0,u.Z)(Q,[["render",F]]);var ee=$,ne={components:{Signupform:B,Loginform:ee},setup(){const e=(0,L.iH)(!0),n=(0,v.tv)(),t=()=>{n.push({name:"Chatroom"})};return{showLogin:e,enterChat:t}}};const te=(0,u.Z)(ne,[["render",H]]);var oe=te;const re={class:"container"};function ae(e,n,t,o,a,l){const i=(0,r.up)("Navbar"),u=(0,r.up)("ChatWindow"),s=(0,r.up)("newChatroom");return(0,r.wg)(),(0,r.iD)("div",re,[(0,r.Wm)(i),(0,r.Wm)(u),(0,r.Wm)(s)])}const le={key:0},ie={style:{"text-align":"left"}},ue={class:"email"};function se(e,n,t,o,a,l){return o.user?((0,r.wg)(),(0,r.iD)("nav",le,[(0,r._)("div",null,[(0,r._)("p",ie,"Hi there "+(0,S.zw)(o.user.displayName),1),(0,r._)("p",ue,"currently logged in as "+(0,S.zw)(o.user.email),1)]),(0,r._)("button",{onClick:n[0]||(n[0]=(...e)=>o.handlesignout&&o.handlesignout(...e))},"Logout")])):(0,r.kq)("",!0)}const ce=(0,L.iH)(null),de=async(e,n,t)=>{ce.value=null;try{await A.signOut()}catch(o){console.log(o.message),ce.value=o.message}},pe=()=>({error:ce,logout:de});var me=pe,ge={setup(){const{user:e}=x(),n=(0,v.tv)(),{logout:t,error:o}=me(),r=async()=>{await t(),n.push({name:"home"})};return{handlesignout:r,error:o,user:e}}};const ve=(0,u.Z)(ge,[["render",se]]);var he=ve;function fe(e,n,t,a,l,i){return(0,r.wg)(),(0,r.iD)("form",null,[(0,r.wy)((0,r._)("textarea",{placeholder:"Type a message hit enter to send...","onUpdate:modelValue":n[0]||(n[0]=e=>a.msg=e),onKeypress:n[1]||(n[1]=(0,o.D2)((0,o.iM)(((...e)=>a.handleSubmit&&a.handleSubmit(...e)),["prevent"]),["enter"]))},null,544),[[o.nr,a.msg]])])}var we={setup(e,n){const{user:t}=x(),{addDoc:o,error:r}=T("messages"),a=(0,L.iH)(""),l=async()=>{if(""!==a.value){const e={name:t.value.displayName,message:a.value,createdAt:W()};return a.value="",await o(e),e}};return{handleSubmit:l,msg:a,error:r}}};const ye=(0,u.Z)(we,[["render",fe],["__scopeId","data-v-0ebcfcf9"]]);var be=ye;const _e={class:"dog",ref:"messages"},He={class:"created-at"},Se={class:"name"},Ce={class:"msg"};function De(e,n,t,o,a,l){return(0,r.wg)(),(0,r.iD)("div",_e,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.computedDate,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.id,class:"messages"},[(0,r._)("span",He,(0,S.zw)(e.createdAt),1),(0,r._)("span",Se,(0,S.zw)(e.name),1),(0,r._)("span",Ce,(0,S.zw)(e.message),1)])))),128))],512)}const ke=e=>{const n=(0,L.iH)(null),t=(0,L.iH)(null),o=O.collection(e).orderBy("createdAt");return o.onSnapshot((e=>{let o=[];e.docs.forEach((e=>{e.data().createdAt&&o.push({...e.data(),id:e.id})})),t.value=o,n.value=null})),{documents:t,error:n}};var Le=ke,Ue=t(1581),Ze={setup(){const{error:e,documents:n}=Le("messages"),t=(0,r.Fl)((()=>{if(n.value)return n.value.map((e=>{let n=(0,Ue.Z)(e.createdAt.toDate());return{...e,createdAt:n}}))})),o=(0,L.iH)(null);return(0,r.ic)((()=>{o.value.scrollTop=o.value.scrollHeight})),{error:e,computedDate:t,messages:o}}};const Oe=(0,u.Z)(Ze,[["render",De]]);var We=Oe,Ae={components:{Navbar:he,newChatroom:be,ChatWindow:We}};const Ee=(0,u.Z)(Ae,[["render",ae]]);var ze=Ee;const Ie=(0,r._)("h2",null,"Map",-1),Me=(0,r._)("div",null,[(0,r._)("div",{class:"google-map",id:"map"})],-1);function Ne(e,n,t,o,a,l){return(0,r.wg)(),(0,r.iD)(r.HY,null,[Ie,Me],64)}var je={setup(){(0,L.iH)(null),(0,L.iH)(null);const{user:e}=x(),n=[];O.collection("users").get().then((t=>{t.forEach((t=>{const o=t.data();o.userX===e.value.uid&&n.push(o.geolocation)}))}));const t=async()=>{O.collection("users").get().then((e=>{e.forEach((e=>{const n=e.data();if(n.geolocation){const e=new google.maps.Marker({position:{lat:n.geolocation.lat,lng:n.geolocation.lng},map:t});e.setMap(t)}}))}));const{Map:e}=await google.maps.importLibrary("maps"),t=await new e(document.getElementById("map"),{center:{lat:n[0].lat,lng:n[0].lng},zoom:6})};(0,r.bv)((()=>{setTimeout((()=>{e.value&&t()}),1e3)}))}};const xe=(0,u.Z)(je,[["render",Ne]]);var Pe=xe;const Te=(e,n,t)=>{const o=A.currentUser;o?t():t({name:"home"})},Ve=(e,n,t)=>{const o=A.currentUser;o?t({name:"Chatroom"}):t()},qe=[{path:"/",name:"home",component:oe,beforeEnter:Ve},{path:"/chatroom",name:"Chatroom",component:ze,beforeEnter:Te},{path:"/geoLocation",name:"geoLocation",component:Pe,beforeEnter:Te}],Be=(0,v.p7)({history:(0,v.PO)("/"),routes:qe});var Re=Be;let Ke;A.onAuthStateChanged((()=>{Ke||(Ke=(0,o.ri)(g).use(Re).mount("#app"))}))}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var a=n[o]={exports:{}};return e[o].call(a.exports,a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(n,o,r,a){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],a=e[c][2];for(var i=!0,u=0;u<o.length;u++)(!1&a||l>=a)&&Object.keys(t.O).every((function(e){return t.O[e](o[u])}))?o.splice(u--,1):(i=!1,a<l&&(l=a));if(i){e.splice(c--,1);var s=r();void 0!==s&&(n=s)}}return n}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,r,a]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var r,a,l=o[0],i=o[1],u=o[2],s=0;if(l.some((function(n){return 0!==e[n]}))){for(r in i)t.o(i,r)&&(t.m[r]=i[r]);if(u)var c=u(t)}for(n&&n(o);s<l.length;s++)a=l[s],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(c)},o=self["webpackChunklive_chat"]=self["webpackChunklive_chat"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(3205)}));o=t.O(o)})();
//# sourceMappingURL=app.21d2c790.js.map